<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="author" content="Perforce Software">
    <meta name="description" content="Example content for use with Perforce Helix Core Actions within GitHub Actions Marketplace">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <link rel="shortcut icon" href="logo-icon-black.svg">
    <title>Perforce Helix Core Actions - Example</title>
</head>
<body style="background: #777777">
    <noscript><strong>We're sorry but "Perforce Helix Core Actions - Example" doesn't work properly without JavaScript enabled. Please enable it
        to continue.</strong></noscript>
    <script src="jquery.min.js"></script>
    <script src="three.js"></script>
    <script src="fflate.min.js"></script>
    <script src="FBXLoader.js"></script>
    <script type="application/javascript">
        (function(){
            var camera, scene, renderer;
            var geometry, material, mesh;

            // Renderer
            if (window.WebGLRenderingContext)
                renderer = new THREE.WebGLRenderer({alpha: true});
            else
                renderer = new THREE.CanvasRenderer({alpha: true});

            renderer.setSize(window.innerWidth, window.innerHeight);
            $('body').append(renderer.domElement);

            //Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.z = 500;

            // Scene
            scene = new THREE.Scene();

            // FBX
            const fbxLoader = new THREE.FBXLoader()
            fbxLoader.load(
                'perforce_logo_3d.fbx',
                (object) => {
                    scene.add(object)

                    var animate = function() {
                        requestAnimationFrame(animate);
                        object.rotation.x = Date.now() * 0.0005;
                        object.rotation.y = Date.now() * 0.001;
                        renderer.render(scene, camera);
                    };
                    animate();
                },
                (xhr) => {
                    console.log((xhr.loaded / xhr.total) * 100 + '% loaded')
                },
                (error) => {
                    console.log(error)
                }
            )

            // Props
            // geometry = new THREE.CubeGeometry(200, 200, 200);
            // material = new THREE.MeshDepthMaterial({
            //     color: 0x999999,
            //     wireframe: false,
            //     wireframeLinewidth: 6
            // });
            // mesh = new THREE.Mesh(geometry, material);
            // scene.add(mesh);

            // var animate = function() {
            //     requestAnimationFrame(animate);
            //     mesh.rotation.x = Date.now() * 0.0005;
            //     mesh.rotation.y = Date.now() * 0.001;
            //     renderer.render(scene, camera);
            // };
            // animate();

            //controls = new THREE.TrackballControls( camera );
            //controls.target.set( 0, 0, 0 )
        })();
    </script>
</body>
</html>
